
You are a program verifier responsible for summarizing the functionality of a Python function.

You are provided with:

1. Annotated Code: The function code with comments that include postconditions at various points.These annotations describe the state of the program at different stages of execution but they may not be accurate or complete. So make sure to consider the actual code as the truth.
2. Return Postconditions: The overall postcondition(s) of the function's execution.

Your Task:

- Analyze the annotated code and the return postconditions.
- Determine what parameters the function accepts and what it returns.
- Provide a concise summary of the function state after it concludes.Please avoid describing how the function operates or implementation detailsâ€”focus on what the function does from the user's perspective and how it affects the input variables . What is the purpose of the function? what sort of actions does it perform? What is the final state of the progrma after it concludes?

You must adhere to the text format: Functionality: ** Your response here **

Your Task:
Annotated Code:
```
#State of the program right berfore the function call: stdin contains n+1 inputs: the first input is an integer n (2 <= n <= 24), the next n inputs are strings of length n, each string contains only characters 'F', 'S', '?' and '.'. The number of 'F' and 'S' characters in all strings is at most n/2. The i-th character of the j-th string and the j-th character of the i-th string are the same for all i and j.
    n = int(input())
    a = [0] * (n + 1)
    b = [0] * (n + 1)
    xx = ['']
    for i in range(1, n + 1):
        x = input()
        
        for j in range(1, n + 1):
            if x[j - 1] == 'F':
                a[i] += 1
                a[j] += 1
            elif x[j - 1] == 'S':
                b[i] += 1
                b[j] += 1
        
        xx.append(x)
        
    #State: n is an integer between 2 and 24, a is a list of n+1 integers where the value at index 1 is the number of 'F' characters in x plus n, the value at index i is the number of 'F' characters in x plus n, the value at index j is the number of 'F' characters in x plus n, and all other values are 0 or a value less than or equal to n. b is a list of n+1 values where if the character at index j-1 of x is 'S', the ith and jth values are a value less than or equal to n and the rest are 0. Otherwise, b remains a list of n+1 zeros except for the ith and jth values which are a value less than or equal to n. xx is a list containing an empty string, and n strings x, x is a string of length n containing only characters 'F', 'S', '?' and '.', i is n, stdin contains -n+1 inputs: strings of length n, each string contains only characters 'F', 'S',?' and '.', j is n.
    sa = []
    sb = []
    for i in range(1, n + 1):
        if a[i] > 0 and b[i] == 0:
            sa.append(i)
        
        if b[i] > 0 and a[i] == 0:
            sb.append(i)
        
    #State: n is an integer between 2 and 24, a is a list of n+1 integers where the value at index 1 is the number of 'F' characters in x plus n, the value at index i is the number of 'F' characters in x plus n, the value at index j is the number of 'F' characters in x plus n, and all other values are 0 or a value less than or equal to n, b is a list of n+1 values where if the character at index j-1 of x is 'S', the ith and jth values are a value less than or equal to n and the rest are 0. Otherwise, b remains a list of n+1 zeros except for the ith and jth values which are a value less than or equal to n, xx is a list containing an empty string, and n strings x, x is a string of length n containing only characters 'F', 'S', '?' and '.', i is n+1, stdin contains -n+1 inputs: strings of length n, each string contains only characters 'F', 'S',?' and '.', j is n. If a[i] is greater than 0 and b[i] is 0, then sa is a list containing the values from 1 to n. Otherwise, sa is a list containing some values from 1 to n. If b[i] is greater than 0 and a[i] is 0, then sb is a list containing the values from 1 to n. Otherwise, sb is a list containing some values from 1 to n.
    if (len(sa) >= len(sb)) :
        for i in range(1, n + 1):
            if a[i] == 0 and b[i] == 0:
                sa.append(i)
            
        #State: `n` is an integer between 2 and 24, `i` is n+1, `a` is a list of n+1 integers where the value at index 1 is the number of 'F' characters in x plus n, the value at index i is the number of 'F' characters in x plus n, the value at index j is the number of 'F' characters in x plus n, and all other values are 0 or a value less than or equal to n, `b` is a list of n+1 values where if the character at index j-1 of x is 'S', the ith and jth values are a value less than or equal to n and the rest are 0. Otherwise, b remains a list of n+1 zeros except for the ith and jth values which are a value less than or equal to n, `xx` is a list containing an empty string, and n strings x, `x` is a string of length n containing only characters 'F', 'S', '?' and '.', `j` is n, `stdin` contains -n+1 inputs: strings of length n, each string contains only characters 'F', 'S',?' and '.', `sa` is a list containing the values from 1 to n if a[i] is greater than 0 and b[i] is 0, otherwise it is a list containing some values from 1 to n, and if a[i] equals 0 and b[i] equals 0, then the value i is appended to the end of `sa`, and if a[i] equals 0 and b[i] equals 0, then the values 2 to n are appended to `sa`, `sb` is a list containing the values from 1 to n if b[i] is greater than 0 and a[i] is 0, otherwise it is a list containing some values from 1 to n, and the length of `sa` is greater than or equal to the length of `sb`.
        for i in range(1, n + 1):
            nx = ''
            
            for j in range(1, n + 1):
                if xx[i][j - 1] != '?':
                    nx += xx[i][j - 1]
                elif i in sa[:n // 4] or j in sa[:n // 4]:
                    nx += 'F'
                else:
                    nx += 'S'
            
            print(nx)
            
        #State: `n` is at least 2, `i` is `n`, `a` is a list of `n`+1 integers where the value at index 1 is the number of 'F' characters in `x` plus `n`, the value at index `i` is the number of 'F' characters in `x` plus `n`, the value at index `j` is the number of 'F' characters in `x` plus `n`, and all other values are 0 or a value less than or equal to `n`, `b` is a list of `n`+1 values where if the character at index `j`-1 of `x` is 'S', the ith and jth values are a value less than or equal to `n` and the rest are 0. Otherwise, `b` remains a list of `n`+1 zeros except for the ith and jth values which are a value less than or equal to `n`, `xx` is a list containing an empty string, and `n` strings `x`, `x` is a string of length `n` containing only characters 'F', 'S',?' and '.', `j` is `n`, `stdin` contains -`n`+1 inputs: strings of length `n`, each string contains only characters 'F', 'S',?' and '.', `sa` is a list containing the values from 1 to `n` if `a[i]` is greater than 0 and `b[i]` is 0, otherwise it is a list containing some values from 1 to `n`, and if `a[i]` equals 0 and `b[i]` equals 0, then the value `i` is appended to the end of `sa`, and if `a[i]` equals 0 and `b[i]` equals 0, then the values 2 to `n` are appended to `sa`, `sb` is a list containing the values from 1 to `n` if `b[i]` is greater than 0 and `a[i]` is 0, otherwise it is a list containing some values from 1 to `n`, and the length of `sa` is greater than or equal to the length of `sb`. `nx` is a string of length `n` containing only characters 'F', 'S',?' and '.'. If the character at index `j`-1 of `x` is not '?', then `nx` is a string containing the character at index `j`-1 of `x` plus the character at index `j`-1 of the string at index `i` of `xx`. If the character at index `j`-1 of `x` is '?', then `nx` is a string containing either 'F' or 'S'. If `i` or `j` is in the first `n`/4 elements of `sa`, then `nx` is 'F' or 'F' is appended to `nx`. Otherwise, `nx` is 'S' or 'S' is appended to `nx`. If the character at index `j`-1 of the string at index `i` of `xx` is not '?', then `nx` is appended with the character at index `j`-1 of the string at index `i` of `xx`. Otherwise, `nx` is either a string containing either 'F' or 'S' plus 'F' or a string containing 'S' appended to its previous value, and `nx` is printed.
    else :
        for i in range(1, n + 1):
            if a[i] == 0 and b[i] == 0:
                sb.append(i)
            
        #State: n is an integer between 2 and 24, a is a list of n+1 integers where the value at index 1 is the number of 'F' characters in x plus n, the value at index i is the number of 'F' characters in x plus n, the value at index j is the number of 'F' characters in x plus n, and all other values are 0 or a value less than or equal to n, b is a list of n+1 values where if the character at index j-1 of x is 'S', the ith and jth values are a value less than or equal to n and the rest are 0. Otherwise, b remains a list of n+1 zeros except for the ith and jth values which are a value less than or equal to n, xx is a list containing an empty string, and n strings x, x is a string of length n containing only characters 'F', 'S', '?' and '.', i is n+1, stdin contains -n+1 inputs: strings of length n, each string contains only characters 'F', 'S',?' and '.', j is n. If a[i] is greater than 0 and b[i] is 0, then sa is a list containing the values from 1 to n. Otherwise, sa is a list containing some values from 1 to n. If b[i] is greater than 0 and a[i] is 0, then sb is a list containing the values from 1 to n. Otherwise, sb is a list containing some values from 1 to n. The length of sa is less than the length of sb. If a[i] and b[i] are both 0, then sa is a list containing the values from 1 to n, and sb is a list containing the values from 1 to i (inclusive) and some values from i+1 to n. sb now contains the value i which is n+1. If a[i] is 0 and b[i] is 0, then sb contains the value i which is n+1.
        for i in range(1, n + 1):
            nx = ''
            
            for j in range(1, n + 1):
                if xx[i][j - 1] != '?':
                    nx += xx[i][j - 1]
                elif i in sb[:n // 4] or j in sb[:n // 4]:
                    nx += 'S'
                else:
                    nx += 'F'
            
            print(nx)
            
        #State: n is an integer between 2 and 24, i is n+1, a is a list of n+1 integers where the value at index 1 is the number of 'F' characters in x plus n, the value at index i is the number of 'F' characters in x plus n, the value at index j is the number of 'F' characters in x plus n, and all other values are 0 or a value less than or equal to n, b is a list of n+1 values where if the character at index j-1 of x is 'S', the ith and jth values are a value less than or equal to n and the rest are 0. Otherwise, b remains a list of n+1 zeros except for the ith and jth values which are a value less than or equal to n, xx is a list containing an empty string, and n strings x, x is a string of length n containing only characters 'F', 'S',?' and '.', j is n+1, stdin contains -n+1 inputs: strings of length n, each string contains only characters 'F', 'S',?' and '.', sa is a list containing the values from 1 to n, sb is a list containing the values from 1 to n, n is at least 1. nx is a string of length n containing either the character at index j-1 of the string at index i in xx if it is not '?', or either the character 'S' or 'F' if it is '?'. If i or j are in the first quarter of sb, nx is a string of length n containing 'S' or 'F' or a combination of 'S' and 'F'. Otherwise, nx is a string of length n containing 'F' or a combination of 'F' and 'S', and nx has been printed n times.
    #State: n is an integer between 2 and 24, a is a list of n+1 integers where the value at index 1 is the number of 'F' characters in x plus n, the value at index i is the number of 'F' characters in x plus n, the value at index j is the number of 'F' characters in x plus n, and all other values are 0 or a value less than or equal to n, b is a list of n+1 values where if the character at index j-1 of x is 'S', the ith and jth values are a value less than or equal to n and the rest are 0. Otherwise, b remains a list of n+1 zeros except for the ith and jth values which are a value less than or equal to n, xx is a list containing an empty string, and n strings x, x is a string of length n containing only characters 'F', 'S',?' and '.', j is n or n+1, stdin contains -n+1 inputs: strings of length n, each string contains only characters 'F', 'S',?' and '.', sa is a list containing the values from 1 to n if a[i] is greater than 0 and b[i] is 0, otherwise it is a list containing some values from 1 to n, and if a[i] equals 0 and b[i] equals 0, then the value i is appended to the end of sa, and if a[i] equals 0 and b[i] equals 0, then the values 2 to n are appended to sa, sb is a list containing the values from 1 to n if b[i] is greater than 0 and a[i] is 0, otherwise it is a list containing some values from 1 to n, nx is a string of length n containing only characters 'F', 'S',?' and '.'. If the character at index j-1 of x is not '?', then nx is a string containing the character at index j-1 of x plus the character at index j-1 of the string at index i of xx. If the character at index j-1 of x is '?', then nx is a string containing either 'F' or 'S'. If i or j is in the first n/4 elements of sa, then nx is 'F' or 'F' is appended to nx. Otherwise, nx is 'S' or 'S' is appended to nx. If the character at index j-1 of the string at index i of xx is not '?', then nx is appended with the character at index j-1 of the string at index i of xx. Otherwise, nx is either a string containing either 'F' or 'S' plus 'F' or a string containing 'S' appended to its previous value, and nx has been printed.

```

Return Postconditions: Case_1: `n` is greater than or equal to 0, `i` is 3, `a` is a list of `n`+1 integers where the value at index 1 is the number of 'F' characters in `x` plus `n`, the value at index `i` is the number of 'F' characters in `x` plus `n`, the value at index `j` is the number of 'F' characters in `x` plus `n`, and all other values are 0 or a value less than or equal to `n`, `b` is a list of `n`+1 values where if the character at index `j`-1 of `x` is 'S', the ith and jth values are a value less than or equal to `n` and the rest are 0. Otherwise, `b` remains a list of `n`+1 zeros except for the ith and jth values which are a value less than or equal to `n`, `xx` is a list containing an empty string, and `n` strings `x`, `x` is a string of length `n` containing only characters 'F', 'S',?' and '.', `j` is `n`, `stdin` contains -`n`+1 inputs: strings of length `n`, each string contains only characters 'F', 'S',?' and '.', `sa` is a list containing the values from 1 to `n` if `a[i]` is greater than 0 and `b[i]` is 0, otherwise it is a list containing some values from 1 to `n`, and if `a[i]` equals 0 and `b[i]` equals 0, then the value `i` is appended to the end of `sa`, and if `a[i]` equals 0 and `b[i]` equals 0, then the values 2 to `n` are appended to `sa`, `sb` is a list containing the values from 1 to `n` if `b[i]` is greater than 0 and `a[i]` is 0, otherwise it is a list containing some values from 1 to `n`, and the length of `sa` is greater than or equal to the length of `sb`. `nx` is a string of length `n` containing only characters 'F', 'S',?' and '.'. If the character at index `j`-1 of `x` is not '?', then `nx` is a string containing the character at index `j`-1 of `x` plus the character at index `j`-1 of the string at index `i` of `xx`. If the character at index `j`-1 of `x` is '?', then `nx` is a string containing either 'F' or 'S'. If `i` or `j` is in the first `n`/4 elements of `sa`, then `nx` is 'F' or 'F' is appended to `nx`. Otherwise, `nx` is 'S' or 'S' is appended to `nx`. If the character at index `j`-1 of the string at index `i` of `xx` is not '?', then `nx` is appended with the character at index `j`-1 of the string at index `i` of `xx`. Otherwise, `nx` is either a string containing either 'F' or 'S' plus 'F' or a string containing 'S' appended to its previous value, and `nx` is printed

Case_2: `n` is an integer between 3 and 24, `i` is 3, `a` is a list of n+1 integers where the value at index 1 is the number of 'F' characters in x plus n, the value at index i is the number of 'F' characters in x plus n, the value at index j is the number of 'F' characters in x plus n, and all other values are 0 or a value less than or equal to n, `b` is a list of n+1 values where if the character at index j-1 of x is 'S', the ith and jth values are a value less than or equal to n and the rest are 0. Otherwise, b remains a list of n+1 zeros except for the ith and jth values which are a value less than or equal to n, `xx` is a list containing an empty string, and n strings x, `x` is a string of length n containing only characters 'F', 'S',?' and '.', `j` is n+1, `stdin` contains -n+1 inputs: strings of length n, each string contains only characters 'F', 'S',?' and '.', `sa` is a list containing the values from 1 to n, `sb` is a list containing the values from 1 to n, `n` is at least 1. `nx` is a string of length n containing either the character at index j-1 of the string at index i in xx if it is not '?', or either the character 'S' or 'F' if it is '?'. If `i` or `j` are in the first quarter of `sb`, `nx` is a string of length n containing 'S' or 'F' or a combination of 'S' and 'F'. Otherwise, `nx` is a string of length n containing 'F' or a combination of 'F' and 'S', and nx is printed.


Now, please think step by step: 
The anotation is there to help you understand the code but the code is the truth. Only include in the functionality, actions that the code actually performs, covering all potential cases.
Use Natural language easily understandable by humans and strictly reply with the format: Functionality: ** your response here **