Reasoning:

The given program is correct. It correctly calculates the expected value of the sum of friendship values of all k pairs chosen for the excursions.

The program first calculates the sum of the initial friendship values of all pairs of friends (sum_f). It then calculates the total number of possible pairs of children (cn2).

The program then calculates the numerator (p) and denominator (q) of the expected value. The numerator is calculated as 2*k*cn2*sum_f + m*k*(k-1), which represents the total sum of friendship values of all k pairs chosen for the excursions. The denominator is calculated as 2*cn2^2, which represents the total number of possible pairs of children squared.

The program then calculates the greatest common divisor (gcd) of p and q, and divides both p and q by the gcd to simplify the fraction.

Finally, the program calculates the modular multiplicative inverse of q modulo M (10^9+7), multiplies it by p, and prints the result modulo M.

The program correctly handles the case where there are no pairs of friends (m=0), in which case the expected value is 0.

Correctness: **True**