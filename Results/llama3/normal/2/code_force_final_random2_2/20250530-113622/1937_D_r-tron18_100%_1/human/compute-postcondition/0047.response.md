Functionality: This function takes a string s1 of length n consisting of characters '<' and '>' as input and returns a list of n elements. The list contains the difference between the cumulative sum of indices of '>' characters and the cumulative sum of indices of '<' characters, with some adjustments based on the number of '>' characters and the last index of the cumulative sum of indices of '<' characters. The function calculates this difference for each character in the input string and returns the resulting list.