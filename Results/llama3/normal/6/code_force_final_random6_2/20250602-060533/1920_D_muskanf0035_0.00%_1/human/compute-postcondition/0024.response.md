Functionality: **The function takes a non-negative integer n, a list of operations, and a list of queries as input. It performs a series of operations on an array, where each operation is either appending a value to the array or duplicating the array. After all operations are performed, the function uses the queries to extract elements from the array at specific indices, wrapping around to the start of the array if necessary. The function returns a list of the extracted elements.**