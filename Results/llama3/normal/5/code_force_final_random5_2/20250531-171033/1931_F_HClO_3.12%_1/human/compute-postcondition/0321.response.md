State: **`i` is either `n - 1` or `n - 2`, `idx1` is either `i` or `-1`, `idx2` is either `i` or `-1`, `p1` is either `0` or `1`, `p2` is either `0` or `1`, `val` is a list containing `m - 2` tuples, `a3` is the first element of the next tuple in `val`, `l3` is the second element of the next tuple in `val`, `m` is at least 3, and `stdin` is empty.**