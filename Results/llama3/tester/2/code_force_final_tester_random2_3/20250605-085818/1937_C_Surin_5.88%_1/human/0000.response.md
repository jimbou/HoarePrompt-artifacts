Here are the test cases for the problem:

**1. Basic Test Cases**

# Test 1
**Input**: 
```
2
4
```
**Output**: 
```
? 0 2 3 1
? 1 1 2 3
? 1 2 0 3
! 3 2
```
**Description**: This test case checks the basic functionality of the code. It should ask queries to find the maximum XOR value and then print the result.

# Test 2
**Input**: 
```
1
2
```
**Output**: 
```
! 0 1
```
**Description**: This test case checks the code's behavior when the input size is 2. It should directly print the result without asking any queries.

**2. Edge Test Cases**

# Test 3
**Input**: 
```
1
10000
```
**Output**: 
```
? ... (up to 3n queries)
! i j
```
**Description**: This test case checks the code's behavior when the input size is maximum (10000). It should ask up to 3n queries to find the maximum XOR value and then print the result.

# Test 4
**Input**: 
```
1000
2
```
**Output**: 
```
! 0 1
! 0 1
...
! 0 1 (1000 times)
```
**Description**: This test case checks the code's behavior when the number of test cases is maximum (1000). It should print the result for each test case without asking any queries.

# Test 5
**Input**: 
```
1
2
```
**Output**: 
```
? 0 0 1 1
? 0 1 0 1
? 1 0 1 0
! 0 1
```
**Description**: This test case checks the code's behavior when the input values are identical. It should ask queries to find the maximum XOR value and then print the result.

# Test 6
**Input**: 
```
1
2
```
**Output**: 
```
? 0 1 0 1
? 1 0 1 0
? 0 0 1 1
! 0 1
```
**Description**: This test case checks the code's behavior when the input values are swapped. It should ask queries to find the maximum XOR value and then print the result.

Note: The above test cases cover various scenarios, including normal cases, edge cases, and boundary cases. The code should be able to handle all these cases correctly.