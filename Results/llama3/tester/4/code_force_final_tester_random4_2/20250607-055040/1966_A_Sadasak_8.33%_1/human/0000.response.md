# Test 1
**Input**:
```
1
5 3
4 1 1 4 4
```
**Output**:
```
2
```
This test case covers the basic scenario where the number of cards is 5 and the exchange rate is 3. The cards have numbers 4, 1, 1, 4, and 4. The expected output is 2, as shown in the example.

# Test 2
**Input**:
```
1
1 10
7
```
**Output**:
```
1
```
This test case covers the edge scenario where the number of cards is 1 and the exchange rate is 10. The card has a number 7. Since no operation can be performed, the expected output is 1.

# Test 3
**Input**:
```
1
7 2
4 2 1 100 5 2 3
```
**Output**:
```
1
```
This test case covers the edge scenario where the number of cards is 7 and the exchange rate is 2. The cards have numbers 4, 2, 1, 100, 5, 2, and 3. Since no operation can be performed, the expected output is 1.

# Test 4
**Input**:
```
1
10 4
1 1 1 1 1 1 1 1 1 1
```
**Output**:
```
3
```
This test case covers the scenario where the number of cards is 10 and the exchange rate is 4. All cards have the same number 1. The expected output is 3, as the cards can be exchanged repeatedly until only 3 cards are left.

# Test 5
**Input**:
```
1
5 2
3 8 1 48 7
```
**Output**:
```
1
```
This test case covers the edge scenario where the number of cards is 5 and the exchange rate is 2. The cards have numbers 3, 8, 1, 48, and 7. Since no operation can be performed, the expected output is 1.

# Test 6
**Input**:
```
1
6 2
10 20 30 10 20 40
```
**Output**:
```
6
```
This test case covers the scenario where the number of cards is 6 and the exchange rate is 2. The cards have numbers 10, 20, 30, 10, 20, and 40. The expected output is 6, as no operation can be performed to reduce the number of cards.

# Test 7
**Input**:
```
1
6 3
10 20 30 10 20 40
```
**Output**:
```
6
```
This test case covers the edge scenario where the number of cards is 6 and the exchange rate is 3. The cards have numbers 10, 20, 30, 10, 20, and 40. Since no operation can be performed, the expected output is 6.