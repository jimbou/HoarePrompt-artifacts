Reasoning:

The given Python program is designed to solve the problem described. Here's a step-by-step analysis of the program's correctness:

1. The program starts by reading the number of test cases `T` and then iterates over each test case.

2. For each test case, it reads the number of children `n`, the number of pairs of friends `p`, and the number of excursions `k`.

3. It then calculates the sum `S` of the initial friendship values of all pairs of friends.

4. The total number of possible pairs of children is calculated as `C = n * (n - 1) // 2`.

5. The program then calculates the numerator `num` and denominator `den` of the expected value of the sum of friendship values. The numerator is calculated as `p * k * k - p * k + 2 * k * C * S`, and the denominator is calculated as `2 * C * C`.

6. The program then calculates the greatest common divisor `g` of `num` and `den` using the `math.gcd` function and divides both `num` and `den` by `g` to simplify the fraction.

7. The program then calculates the modular multiplicative inverse of `den` modulo `MOD` using the `pow` function with a negative exponent, which is equivalent to calculating `den` to the power of `-1` modulo `MOD`.

8. Finally, the program calculates the expected value by multiplying `num` with the modular multiplicative inverse of `den` modulo `MOD` and prints the result.

Based on the above analysis, the program correctly implements the mathematical formula for the expected value of the sum of friendship values and handles the modular arithmetic correctly.

Correctness: **True**