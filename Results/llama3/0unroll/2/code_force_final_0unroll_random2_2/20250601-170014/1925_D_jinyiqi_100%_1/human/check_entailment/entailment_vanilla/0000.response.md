Reasoning:

The given program is designed to calculate the expected value of the sum of friendship values of all k pairs chosen for the excursions. Here's a step-by-step breakdown of the program's correctness:

1. The program first reads the number of test cases `t` and then iterates over each test case.

2. For each test case, it reads the number of children `n`, the number of pairs of friends `m`, and the number of excursions `k`.

3. It then calculates the sum of the initial friendship values `sum_f` by iterating over each pair of friends and adding their friendship value.

4. The program calculates the total number of possible pairs `cn2` using the formula `n * (n - 1) // 2`.

5. It then calculates the numerator `p` and denominator `q` of the expected value. The numerator `p` is calculated as `2 * k * cn2 * sum_f + m * k * (k - 1)`, which represents the sum of the products of the number of excursions, the total number of possible pairs, the sum of the initial friendship values, and the number of pairs of friends. The denominator `q` is calculated as `2 * cn2 ** 2`, which represents the total number of possible pairs squared.

6. The program then calculates the greatest common divisor `gcd` of `p` and `q` using the `math.gcd` function and divides both `p` and `q` by `gcd` to simplify the fraction.

7. Finally, the program calculates the modular inverse of `q` modulo `M` (where `M` is `10 ** 9 + 7`) using the `pow` function and multiplies it with `p` to get the final result. The result is then printed modulo `M`.

The program's logic is correct, and it accurately calculates the expected value of the sum of friendship values of all k pairs chosen for the excursions.

Correctness: **True**