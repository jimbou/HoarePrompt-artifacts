Reasoning:

The given program is correct. Here's why:

1. The program correctly reads the input values `n`, `m`, and `k` for each test case, and initializes the sum of friendship values `sum_f` to 0.
2. It correctly calculates the sum of friendship values `sum_f` by iterating over the `m` pairs of friends and adding their friendship values.
3. It correctly calculates the total number of possible pairs `cn2` using the formula `n * (n - 1) // 2`.
4. It correctly calculates the numerator `p` and denominator `q` of the fraction using the formulas `2 * k * cn2 * sum_f + m * k * (k - 1)` and `2 * cn2 ** 2`, respectively.
5. It correctly calculates the greatest common divisor `gcd` of `p` and `q` using the `math.gcd` function.
6. It correctly reduces the fraction by dividing both `p` and `q` by `gcd`.
7. It correctly calculates the modular inverse of `q` using the `pow` function with a modulus of `M = 10 ** 9 + 7`.
8. It correctly multiplies `p` by the modular inverse of `q` and takes the result modulo `M` to obtain the final answer.

The program's logic is sound, and it correctly implements the mathematical formulas and algorithms required to solve the problem. Therefore, the program is correct.

Correctness: **True**