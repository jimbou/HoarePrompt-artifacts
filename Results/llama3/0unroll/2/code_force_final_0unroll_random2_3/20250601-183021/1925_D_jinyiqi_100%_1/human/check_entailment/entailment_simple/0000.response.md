Reasoning:

The given program is correct. Here's why:

1. The program correctly reads the input for each test case, which consists of the number of children (n), the number of pairs of friends (m), and the number of excursions (k), followed by m lines, each containing three integers representing the indices of the pair of children who are friends and their friendship value.

2. The program correctly calculates the sum of the friendship values of all pairs of friends (sum_f) by iterating over the m lines of input.

3. The program correctly calculates the total number of possible pairs of children (cn2) using the formula n * (n - 1) // 2.

4. The program correctly calculates the numerator (p) and denominator (q) of the expected value of the sum of friendship values of all k pairs chosen for the excursions. The numerator is calculated as 2 * k * cn2 * sum_f + m * k * (k - 1), and the denominator is calculated as 2 * cn2 ** 2.

5. The program correctly calculates the greatest common divisor (gcd) of the numerator and denominator using the math.gcd function.

6. The program correctly simplifies the fraction by dividing both the numerator and denominator by their greatest common divisor.

7. The program correctly calculates the modular inverse of the denominator (q) using the pow function with a modulus of M (10^9 + 7).

8. The program correctly calculates the final result by multiplying the numerator (p) with the modular inverse of the denominator (q) and taking the modulus M.

9. The program correctly prints the result for each test case.

Therefore, the given program is correct.

Correctness: **True**