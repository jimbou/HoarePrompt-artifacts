Reasoning:

The given Python program is correct based on the problem description and the execution states of the program provided as comments.

The program correctly reads the input from stdin, processes the test cases, and outputs the minimum number of invitations Monocarp has to send so that at least 2 friends come to the party.

The program checks if any of the integers p_i is equal to the integer at index p_i - 1 in the list. If such a condition is met, it means that the i-th friend and the p_i-th friend are each other's best friends, and both of them will come to the party if they receive invitations. In this case, the program prints 2, which is the minimum number of invitations needed.

If no such condition is met, it means that there are no pairs of friends who are each other's best friends. In this case, the program prints 3, which is the minimum number of invitations needed to ensure that at least 2 friends come to the party.

The program correctly consumes the input for the current test case and the remaining test cases (t-1 test cases) from stdin, leaving the input state with the variable `n` decremented by 1.

Therefore, the program is correct and will produce the expected output for the given input.

Correctness: **True**