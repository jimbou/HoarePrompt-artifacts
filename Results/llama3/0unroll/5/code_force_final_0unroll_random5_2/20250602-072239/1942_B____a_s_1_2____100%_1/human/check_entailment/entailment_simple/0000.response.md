Reasoning:

The given program is correct. Here's why:

1. The program correctly reads the input: it reads the number of test cases `t`, then for each test case, it reads the length of the array `n` and the elements of the array `a`.

2. The program correctly initializes the array `p` with `-1` values and the variable `mex` with the value `n`.

3. The program correctly calculates the values of `p` in reverse order. For each index `i` from `n-1` to `0`, it calculates `p[i]` as `mex - a[i]` and updates `mex` to be the minimum of `mex` and `p[i]`. This is correct because the MEX of a prefix of the array is the minimum non-negative integer that does not appear in that prefix, and `p[i]` is the value that should be at index `i` to make the MEX of the prefix equal to `mex`.

4. The program correctly prints the values of `p` in reverse order.

Therefore, the program correctly constructs a valid permutation `p` that satisfies the given array `a`.

Correctness: **True**