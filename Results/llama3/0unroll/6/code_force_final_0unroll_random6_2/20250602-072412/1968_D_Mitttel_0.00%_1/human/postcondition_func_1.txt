Calculates the score by traversing a permutation list 'p' and accumulating values from list 'a' for 'k' steps, handling cycles in the permutation by adding the score of full cycles and remaining steps, and returns the total score.