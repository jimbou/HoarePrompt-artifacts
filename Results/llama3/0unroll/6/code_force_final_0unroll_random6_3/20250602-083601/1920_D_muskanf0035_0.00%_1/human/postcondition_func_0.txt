This function takes a non-negative integer n, a list of operations, and a list of queries as input. It processes the operations by either appending a value to an array or duplicating the array. Then, it uses the queries to extract values from the processed array, where each query corresponds to an index in the array. The function returns a list of non-negative integers, where each integer is the value at the index specified by the corresponding query, wrapping around to the start of the array if the index exceeds its length.